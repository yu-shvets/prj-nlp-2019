# Механізм обробки питань для чат-боту

Чат-бот по суті являє собою питально-відповідну систему [wiki](https://uk.wikipedia.org/wiki/Питально-відповідна_система) - інформаційна система яка здатна сприймати запити побудовані природною мовою.

Необхідність розвитку таких систем цілком зрозуміла - полегшення взаємодії із комп'ютерами, прискорення процесу отримання інформації, скасування необхідності спеціальних знань для отримання даних, тощо. Сфера використання, на жаль, обмежена тільки ситуаціями, де люди можуть ставити питання і отримувати на них відповідь.

## Базове рішення

Я передбачаю систему яка зможе давати відповіді на питання стосовно рядів даних. І ця система буде англійською мовою.

Робочий юз-кейс - курс валют. Оскільки є багато відкритих джерел де його можна взяти (принаймні сподіваюся) по різних країнах / банках. Тоді на первому етапі система має відповідати на питання “як змінився курс“, “в якому банку найбільш вигідно поміняти гривні / долари“, “в якій валюті краще зберігати гроші в Америці”

Базові питання:

- як змінилося показники за період
- як відносяться показники з різних підмножин ряду
- коли були екстремуми

## Додаткові задачі

1. Уточнювальний запитання від бота (побудова діалогу)

U: чи долар дорожчий за євро?
B: стосовно якої валюти?
U: гривні.
B: ні, не дорожчий

2. Питання причини (пошук збіжних коливань в інших рядах)
Додати інший ряд даних, наприклад вартість акцій великих компаній. Тоді система має відповідати на питання типу “чому подорожчали акції MS” - “можливо це пов'язано з тим, що в ці дати виріс курс долара до євро“.

3. Питання причини (пошук новин в приблизні проміжки часу прив‘язані до знаних сутностей: країна / валюта)
Додати короткі фінансові новини. Тоді можна у відповідь про причини додавати відповідь типу “хтось видав закон про вільний оббіг євро-валюти в країні“. Маркування новини датою і сутністю “країна” / “євро“. Потім пошук відповідей прив‘язаних до сутності у запитанні.

4. Прогнози. “чи варто купувати долари завтра чи краще почекати тиждень?“. “В якій валюті краще зберігати гроші?”

## Основні підзадачі

### Класифікація питань

- виокремлення питань що стосуються знаних системою сутностей (валюти / країни)
- типізування питання для побудови коректної відповіді. (що саме хоче почути користувач — дату / цифру / відношення).

Перша версія буде розбирати питання відповідно до семантичних правил. Якщо починається з what/where/when <модальне дієслово>... - то це скоріш за все питання. Пошук сутностей наче теж не важко - будемо шукати леми з речення в базі даних;

Наступний крок - побудувати класифікатор питань, який буде спиратися на такі типи:
• Factoid: Who discovered America?
• Yes/No: Is Berlin the capital of Germany?
• Definition: What is leukemia?
• Cause/consequence: Why did the Iraq war start?
• Procedural: Which are the steps for getting a Master degree?
• Comparative: What is the difference between model A and model B?
• Queries with examples: What hard disks are similar to hard disk X?
• Queries about opinion: What is the opinion of the majority of
Americans about the Iraq war?

- використати загальнотематичні бази питань (https://stackexchange.com; http://www.cs.cmu.edu/~ark/QA-data/)
- пошук тематичного датасету (фінанси, біржи, валюти)

### Класифікація валют

В першій інтепретації можна обійтися без явного визначення валюти (на етапі маркування POS і тегування). Ми можемо брати сутності які точно не є запитальним словом / модальним_глаголом й інше. Й шукати їх лемми у підготовленому переліку валют. Це перелік виглядатиме як dollar -> ($; USD; US$; U.S. dollar, or American dollar)

В наступній версії побудувати класифікатор - який вже зможе визначати валюту на етапі розбору речення (визначення правильної лемми для всіх можливих форм запису (включачи спеціальні знаки)).

- потенційні проблеми - визначення країни які належить валюта з не унікальною назвою (власне долар)

### Визначення часу

- https://duckling.wit.ai/
- parsedatetime (python lib)
- dateparser (python lib)